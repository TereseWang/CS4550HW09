{"ast":null,"code":"import _regeneratorRuntime from\"/media/psf/Home/Desktop/event-spa/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/psf/Home/Desktop/event-spa/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import store from'./store';function api_get(_x){return _api_get.apply(this,arguments);}function _api_get(){_api_get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(path){var text,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://events-spa.teresewang.com:4000/api/v1\"+path,{});case 2:text=_context.sent;_context.next=5;return text.json();case 5:resp=_context.sent;return _context.abrupt(\"return\",resp.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return _api_get.apply(this,arguments);}function api_post(_x2,_x3){return _api_post.apply(this,arguments);}function _api_post(){_api_post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(path,data){var opts,text;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:opts={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)};_context2.next=3;return fetch(\"http://events-spa.teresewang.com:4000/api/v1\"+path,opts);case 3:text=_context2.sent;_context2.next=6;return text.json();case 6:return _context2.abrupt(\"return\",_context2.sent);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _api_post.apply(this,arguments);}export function fetch_users(){api_get(\"/users\").then(function(data){var action={type:'users/set',data:data};store.dispatch(action);});}export function fetch_events(){api_get(\"/events\").then(function(data){var action={type:'events/set',data:data};store.dispatch(action);});}export function api_login(email,password){api_post(\"/session\",{email:email,password:password}).then(function(data){console.log(\"login resp\",data);if(data.session){var action={type:'session/set',data:data.session};store.dispatch(action);}else if(data.error){var _action={type:'error/set',data:data.error};store.dispatch(_action);}});}export function create_user(user){return api_post(\"/users\",{user:user});}export function create_event(_x4){return _create_event.apply(this,arguments);}function _create_event(){_create_event=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=new FormData();data.append(\"event[date]\",event.date);data.append(\"event[description]\",event.description);data.append(\"event[name]\",event.name);fetch(\"http://events-spa.teresewang.com:4000/api/v1/events\",{method:'POST',body:data}).then(function(resp){console.log(resp);});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _create_event.apply(this,arguments);}export function load_defaults(){fetch_events();fetch_users();}","map":{"version":3,"sources":["/media/psf/Home/Desktop/event-spa/web-ui/src/api.js"],"names":["store","api_get","path","fetch","text","json","resp","data","api_post","opts","method","headers","body","JSON","stringify","fetch_users","then","action","type","dispatch","fetch_events","api_login","email","password","console","log","session","error","create_user","user","create_event","event","FormData","append","date","description","name","load_defaults"],"mappings":"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","sourcesContent":["import store from './store';\n\nasync function api_get(path) {\n  let text = await fetch(\n    \"http://events-spa.teresewang.com:4000/api/v1\" + path, {});\n  let resp = await text.json();\n  return resp.data;\n}\n\nasync function api_post(path, data) {\n  let opts = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data),\n  };\n  let text = await fetch(\n    \"http://events-spa.teresewang.com:4000/api/v1\" + path, opts);\n  return await text.json();\n}\n\nexport function fetch_users() {\n  api_get(\"/users\").then((data) => {\n    let action = {\n      type: 'users/set',\n      data: data,\n    }\n    store.dispatch(action);\n  });\n}\n\nexport function fetch_events() {\n  api_get(\"/events\").then((data) => {\n    let action = {\n      type: 'events/set',\n      data: data,\n    }\n    store.dispatch(action);\n  });\n}\n\nexport function api_login(email, password) {\n  api_post(\"/session\", {email, password}).then((data) => {\n    console.log(\"login resp\", data);\n    if (data.session) {\n      let action = {\n        type: 'session/set',\n        data: data.session,\n      }\n      store.dispatch(action);\n    }\n    else if (data.error) {\n     let action = {\n        type: 'error/set',\n        data: data.error,\n      }\n      store.dispatch(action);\n    }\n  });\n}\n\nexport function create_user(user) {\n  return api_post(\"/users\", {user});\n}\n\nexport async function create_event(event){\n  let data = new FormData();\n  data.append(\"event[date]\", event.date)\n  data.append(\"event[description]\", event.description);\n  data.append(\"event[name]\", event.name);\n  fetch(\"http://events-spa.teresewang.com:4000/api/v1/events\", {\n    method: 'POST',\n    body: data,\n  }).then((resp) => {\n    console.log(resp);\n  });\n}\n\nexport function load_defaults() {\n  fetch_events();\n  fetch_users();\n}\n"]},"metadata":{},"sourceType":"module"}