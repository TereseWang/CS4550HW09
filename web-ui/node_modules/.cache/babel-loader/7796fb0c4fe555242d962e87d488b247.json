{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550HW09/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory,NavLink,useLocation}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{update_event,fetch_events,fetch_users,fetch_user,fetch_event}from'../api';import Datetime from'react-datetime';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EventEdit(_ref){var session=_ref.session,user_form=_ref.user_form,event_form=_ref.event_form;var history=useHistory();var location=useLocation();var event_id=location.pathname.split(\"/events/edit/\")[1];if(typeof event_form.id==\"undefined\"||event_form.id!=event_id){fetch_events();fetch_event(event_id);}if(typeof event_form.id==\"undefined\"||user_form.id!=event_form.user_id){fetch_events();fetch_user(event_form.user_id);}var _useState=useState({user_id:\"\",name:event_form.name,description:event_form.description,date:event_form.date,id:event_form.id}),_useState2=_slicedToArray(_useState,2),event=_useState2[0],setEvent=_useState2[1];function onSubmit(ev){ev.preventDefault();event['user_id']=session.user_id;var data=pick(event,['user_id','name','description','date','id']);update_event(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_events();fetch_users();fetch_event(event_id);history.push(\"/events/view/\"+event_id);}});}function update(field,ev){var u1=Object.assign({},event);u1[field]=ev.target.value;setEvent(u1);}function updateDate(date){var newEvent=Object.assign({},event);newEvent[\"date\"]=date;setEvent(newEvent);}if(session){return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Edit Event\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Event Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"name\",ev);},value:event.name})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Datetime,{value:event.date,onChange:function onChange(value){return updateDate(value);},dateFormat:\"YYYY-MM-DD\",timeFormat:\"HH:mm:SS\",className:\"mb-4 max-width-300\",inputProps:{value:event.date?moment(event.date).format('MMMM D, YYYY   h:mm a'):''}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Event Description\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"description\",ev);},value:event.description})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold mr-3\",children:\"Save\"})]});}else{return/*#__PURE__*/_jsx(\"h1\",{children:\"Log in to edit\"});}}function state2props(_ref2){var session=_ref2.session,user_form=_ref2.user_form,event_form=_ref2.event_form;return{session:session,user_form:user_form,event_form:event_form};}export default connect(state2props)(EventEdit);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550HW09/web-ui/src/Event/Edit.js"],"names":["Row","Col","Form","Button","connect","useState","useHistory","NavLink","useLocation","pick","store","update_event","fetch_events","fetch_users","fetch_user","fetch_event","Datetime","moment","EventEdit","session","user_form","event_form","history","location","event_id","pathname","split","id","user_id","name","description","date","event","setEvent","onSubmit","ev","preventDefault","data","then","error","action","type","dispatch","push","update","field","u1","Object","assign","target","value","updateDate","newEvent","format","state2props"],"mappings":"gKAAA,OAASA,GAAT,CAAcC,GAAd,CAAmBC,IAAnB,CAAyBC,MAAzB,KAAsC,iBAAtC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,UAAT,CAAqBC,OAArB,CAA8BC,WAA9B,KAAiD,kBAAjD,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,YAAT,CAAwBC,YAAxB,CAAsCC,WAAtC,CAAmDC,UAAnD,CAA+DC,WAA/D,KAAiF,QAAjF,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,C,wFAEA,QAASC,CAAAA,SAAT,MAAqD,IAAjCC,CAAAA,OAAiC,MAAjCA,OAAiC,CAAxBC,SAAwB,MAAxBA,SAAwB,CAAbC,UAAa,MAAbA,UAAa,CACnD,GAAIC,CAAAA,OAAO,CAAGhB,UAAU,EAAxB,CACA,GAAIiB,CAAAA,QAAQ,CAAGf,WAAW,EAA1B,CACA,GAAIgB,CAAAA,QAAQ,CAAGD,QAAQ,CAACE,QAAT,CAAkBC,KAAlB,CAAwB,eAAxB,EAAyC,CAAzC,CAAf,CAEA,GAAG,MAAOL,CAAAA,UAAU,CAACM,EAAlB,EAAyB,WAAzB,EAAwCN,UAAU,CAACM,EAAX,EAAiBH,QAA5D,CAAsE,CACpEZ,YAAY,GACZG,WAAW,CAACS,QAAD,CAAX,CACD,CAED,GAAG,MAAOH,CAAAA,UAAU,CAACM,EAAlB,EAAyB,WAAzB,EAAwCP,SAAS,CAACO,EAAV,EAAgBN,UAAU,CAACO,OAAtE,CAA8E,CAC5EhB,YAAY,GACZE,UAAU,CAACO,UAAU,CAACO,OAAZ,CAAV,CACD,CAED,cAA0BvB,QAAQ,CAAC,CACjCuB,OAAO,CAAE,EADwB,CACpBC,IAAI,CAAER,UAAU,CAACQ,IADG,CACGC,WAAW,CAAET,UAAU,CAACS,WAD3B,CACwCC,IAAI,CAAEV,UAAU,CAACU,IADzD,CAC+DJ,EAAE,CAAEN,UAAU,CAACM,EAD9E,CAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eAIA,QAASC,CAAAA,QAAT,CAAkBC,EAAlB,CAAsB,CACpBA,EAAE,CAACC,cAAH,GACAJ,KAAK,CAAC,SAAD,CAAL,CAAmBb,OAAO,CAACS,OAA3B,CACA,GAAIS,CAAAA,IAAI,CAAG5B,IAAI,CAACuB,KAAD,CAAQ,CAAC,SAAD,CAAY,MAAZ,CAAoB,aAApB,CAAmC,MAAnC,CAA2C,IAA3C,CAAR,CAAf,CACArB,YAAY,CAAC0B,IAAD,CAAZ,CAAmBC,IAAnB,CAAwB,SAACD,IAAD,CAAU,CAC9B,GAAGA,IAAI,CAACE,KAAR,CAAe,CACb,GAAIC,CAAAA,MAAM,CAAC,CACTC,IAAI,CAAC,WADI,CAETJ,IAAI,CAAEA,IAAI,CAACE,KAFF,CAAX,CAIA7B,KAAK,CAACgC,QAAN,CAAeF,MAAf,EACD,CAND,IAOK,CACH5B,YAAY,GACZC,WAAW,GACXE,WAAW,CAACS,QAAD,CAAX,CACAF,OAAO,CAACqB,IAAR,CAAa,gBAAkBnB,QAA/B,EACD,CACJ,CAdD,EAeD,CAED,QAASoB,CAAAA,MAAT,CAAgBC,KAAhB,CAAuBV,EAAvB,CAA2B,CACzB,GAAIW,CAAAA,EAAE,CAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBhB,KAAlB,CAAT,CACAc,EAAE,CAACD,KAAD,CAAF,CAAYV,EAAE,CAACc,MAAH,CAAUC,KAAtB,CACAjB,QAAQ,CAACa,EAAD,CAAR,CACD,CAED,QAASK,CAAAA,UAAT,CAAoBpB,IAApB,CAA0B,CACxB,GAAIqB,CAAAA,QAAQ,CAAGL,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBhB,KAAlB,CAAf,CACAoB,QAAQ,CAAC,MAAD,CAAR,CAAmBrB,IAAnB,CACAE,QAAQ,CAACmB,QAAD,CAAR,CACD,CAED,GAAGjC,OAAH,CAAY,CACZ,mBACI,MAAC,IAAD,EAAM,QAAQ,CAAEe,QAAhB,wBACE,MAAC,IAAD,CAAM,KAAN,yBACE,WAAI,SAAS,CAAC,MAAd,wBADF,cAEE,KAAC,IAAD,CAAM,KAAN,yBAFF,cAGE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CACc,QAAQ,CACN,kBAACC,EAAD,QAAQS,CAAAA,MAAM,CAAC,MAAD,CAAST,EAAT,CAAd,EAFhB,CAGE,KAAK,CAAEH,KAAK,CAACH,IAHf,EAHF,GADF,cASE,MAAC,IAAD,CAAM,KAAN,yBACI,KAAC,IAAD,CAAM,KAAN,mBADJ,cAEI,aAFJ,cAGI,KAAC,QAAD,EACE,KAAK,CAAEG,KAAK,CAACD,IADf,CAEE,QAAQ,CAAE,kBAACmB,KAAD,QAAWC,CAAAA,UAAU,CAACD,KAAD,CAArB,EAFZ,CAGE,UAAU,CAAC,YAHb,CAIE,UAAU,CAAC,UAJb,CAKE,SAAS,CAAC,oBALZ,CAME,UAAU,CAAE,CACZA,KAAK,CAAElB,KAAK,CAACD,IAAN,CACLd,MAAM,CAACe,KAAK,CAACD,IAAP,CAAN,CAAmBsB,MAAnB,CAA0B,uBAA1B,CADK,CAEL,EAHU,CANd,EAHJ,GATF,cAyBE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,gCADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CACc,QAAQ,CACN,kBAAClB,EAAD,QAAQS,CAAAA,MAAM,CAAC,aAAD,CAAgBT,EAAhB,CAAd,EAFhB,CAGE,KAAK,CAAEH,KAAK,CAACF,WAHf,EAFF,GAzBF,cAgCE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,SAAS,CAAC,0BAAlD,kBAhCF,GADJ,CAsCC,CAvCD,IAwCK,CACH,mBAAO,sCAAP,CACD,CACF,CAED,QAASwB,CAAAA,WAAT,OAAuD,IAAjCnC,CAAAA,OAAiC,OAAjCA,OAAiC,CAAxBC,SAAwB,OAAxBA,SAAwB,CAAbC,UAAa,OAAbA,UAAa,CACrD,MAAO,CAACF,OAAO,CAAPA,OAAD,CAAUC,SAAS,CAATA,SAAV,CAAqBC,UAAU,CAAVA,UAArB,CAAP,CACD,CAED,cAAejB,CAAAA,OAAO,CAACkD,WAAD,CAAP,CAAqBpC,SAArB,CAAf","sourcesContent":["import { Row, Col, Form, Button} from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory, NavLink, useLocation } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { update_event , fetch_events, fetch_users, fetch_user, fetch_event} from '../api';\nimport Datetime from 'react-datetime';\nimport moment from 'moment';\n\nfunction EventEdit({session, user_form, event_form}) {\n  let history = useHistory();\n  let location = useLocation();\n  let event_id = location.pathname.split(\"/events/edit/\")[1]\n\n  if(typeof(event_form.id) == \"undefined\" || event_form.id != event_id) {\n    fetch_events()\n    fetch_event(event_id)\n  }\n\n  if(typeof(event_form.id) == \"undefined\" || user_form.id != event_form.user_id){\n    fetch_events()\n    fetch_user(event_form.user_id)\n  }\n\n  const [event, setEvent] = useState({\n    user_id: \"\", name: event_form.name, description: event_form.description, date: event_form.date, id: event_form.id\n  })\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    event['user_id'] = session.user_id;\n    let data = pick(event, ['user_id', 'name', 'description', 'date', 'id']);\n    update_event(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_events()\n          fetch_users()\n          fetch_event(event_id)\n          history.push(\"/events/view/\" + event_id)\n        }\n    });\n  }\n\n  function update(field, ev) {\n    let u1 = Object.assign({}, event);\n    u1[field] = ev.target.value;\n    setEvent(u1);\n  }\n\n  function updateDate(date) {\n    let newEvent = Object.assign({}, event);\n    newEvent[\"date\"] = date;\n    setEvent(newEvent);\n  }\n\n  if(session) {\n  return(\n      <Form onSubmit={onSubmit}>\n        <Form.Group>\n          <h1 className=\"mt-5\">Edit Event</h1>\n          <Form.Label>Event Name</Form.Label>\n          <Form.Control type=\"text\"\n                        onChange={\n                          (ev) => update(\"name\", ev)}\n            value={event.name} />\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Date</Form.Label>\n            <br></br>\n            <Datetime\n              value={event.date}\n              onChange={(value) => updateDate(value)}\n              dateFormat=\"YYYY-MM-DD\"\n              timeFormat=\"HH:mm:SS\"\n              className=\"mb-4 max-width-300\"\n              inputProps={{\n              value: event.date\n              ? moment(event.date).format('MMMM D, YYYY   h:mm a')\n              : '',\n          }}\n        />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Event Description</Form.Label>\n          <Form.Control type=\"text\"\n                        onChange={\n                          (ev) => update(\"description\", ev)}\n            value={event.description} />\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold mr-3\">\n          Save\n        </Button>\n      </Form>\n    );\n  }\n  else {\n    return <h1>Log in to edit</h1>\n  }\n}\n\nfunction state2props({session, user_form, event_form}) {\n  return {session, user_form, event_form};\n}\n\nexport default connect(state2props)(EventEdit);\n"]},"metadata":{},"sourceType":"module"}