{"ast":null,"code":"import _regeneratorRuntime from\"/media/psf/Home/Desktop/CS4550HW09/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/media/psf/Home/Desktop/CS4550HW09/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/media/psf/Home/Desktop/CS4550HW09/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import store from'./store';//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University\nfunction api_get(_x){return _api_get.apply(this,arguments);}function _api_get(){_api_get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(path){var text,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:4000/api/v1\"+path,{});case 2:text=_context.sent;_context.next=5;return text.json();case 5:resp=_context.sent;return _context.abrupt(\"return\",resp.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return _api_get.apply(this,arguments);}function api_post(_x2,_x3){return _api_post.apply(this,arguments);}function _api_post(){_api_post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(path,data){var opts,text;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:opts={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)};_context2.next=3;return fetch(\"http://localhost:4000/api/v1\"+path,opts);case 3:text=_context2.sent;_context2.next=6;return text.json();case 6:return _context2.abrupt(\"return\",_context2.sent);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _api_post.apply(this,arguments);}export function fetch_users(){api_get(\"/users\").then(function(data){return store.dispatch({type:'users/set',data:data});});}export function fetch_user(id){api_get(\"/users/\"+id).then(function(data){return store.dispatch({type:'user_form/set',data:data});});}export function create_user(_x4){return _create_user.apply(this,arguments);}function _create_user(){_create_user=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user){var data,resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=new FormData();data.append(\"user[name]\",user.name);data.append(\"user[email]\",user.email);data.append(\"user[password]\",user.password);_context3.next=6;return fetch(\"http://localhost:4000/api/v1/users\",{method:\"POST\",body:data});case 6:resp=_context3.sent;_context3.next=9;return resp.json();case 9:return _context3.abrupt(\"return\",_context3.sent);case 10:case\"end\":return _context3.stop();}}},_callee3);}));return _create_user.apply(this,arguments);}export function update_user(_x5){return _update_user.apply(this,arguments);}function _update_user(){_update_user=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(user){var data,resp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=new FormData();data.append(\"user_id\",user.id);data.append(\"user[name]\",user.name);data.append(\"user[email]\",user.email);data.append(\"user[password]\",user.password);_context4.next=7;return fetch(\"http://localhost:4000/api/v1/users/\"+user.id,{method:\"PATCH\",body:data});case 7:resp=_context4.sent;_context4.next=10;return resp.json();case 10:return _context4.abrupt(\"return\",_context4.sent);case 11:case\"end\":return _context4.stop();}}},_callee4);}));return _update_user.apply(this,arguments);}export function fetch_events(){api_get(\"/events\").then(function(data){store.dispatch({type:'events/set',data:data});});}export function fetch_event(id){api_get(\"/events/\"+id).then(function(data){return store.dispatch({type:'event_form/set',data:data});});}export function create_event(_x6){return _create_event.apply(this,arguments);}function _create_event(){_create_event=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event){var data,resp;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data=new FormData();data.append(\"event[user_id]\",event.user_id);data.append(\"event[date]\",JSON.stringify(event.date));data.append(\"event[description]\",event.description);data.append(\"event[name]\",event.name);_context5.next=7;return fetch(\"http://localhost:4000/api/v1/events\",{method:\"POST\",body:data});case 7:resp=_context5.sent;_context5.next=10;return resp.json();case 10:return _context5.abrupt(\"return\",_context5.sent);case 11:case\"end\":return _context5.stop();}}},_callee5);}));return _create_event.apply(this,arguments);}export function update_event(_x7){return _update_event.apply(this,arguments);}function _update_event(){_update_event=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(event){var data,resp;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:data=new FormData();data.append(\"event[user_id]\",event.user_id);data.append(\"event[date]\",JSON.stringify(event.date));data.append(\"event[description]\",event.description);data.append(\"event[name]\",event.name);_context6.next=7;return fetch(\"http://localhost:4000/api/v1/events/\"+event.id,{method:\"PATCH\",body:data});case 7:resp=_context6.sent;_context6.next=10;return resp.json();case 10:return _context6.abrupt(\"return\",_context6.sent);case 11:case\"end\":return _context6.stop();}}},_callee6);}));return _update_event.apply(this,arguments);}export function delete_event(_x8){return _delete_event.apply(this,arguments);}function _delete_event(){_delete_event=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id){var data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:data=new FormData();data.append(\"id\",id);fetch(\"http://localhost:4000/api/v1/events/\"+id,{method:'DELETE',body:data}).then(function(resp){if(!resp.ok){var action={type:'error/set',data:'Unable to delete event.'};store.dispatch(action);}else{fetch_events();}});case 3:case\"end\":return _context7.stop();}}},_callee7);}));return _delete_event.apply(this,arguments);}export function fetch_comments(event_id){api_get(\"/comments\").then(function(data){var result=[];for(var _i=0,_Object$entries=Object.entries(data);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(value.event_id==event_id){result.push(value);}}store.dispatch({type:'comments/set',data:result});});}export function create_comment(_x9,_x10,_x11){return _create_comment.apply(this,arguments);}function _create_comment(){_create_comment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(comment,user_id,event_id){var data,resp;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:data=new FormData();data.append(\"comment[body]\",comment);data.append(\"comment[event_id]\",event_id);data.append(\"comment[user_id]\",user_id);_context8.next=6;return fetch(\"http://localhost:4000/api/v1/comments\",{method:\"POST\",body:data});case 6:resp=_context8.sent;_context8.next=9;return resp.json();case 9:return _context8.abrupt(\"return\",_context8.sent);case 10:case\"end\":return _context8.stop();}}},_callee8);}));return _create_comment.apply(this,arguments);}export function delete_comment(_x12,_x13){return _delete_comment.apply(this,arguments);}function _delete_comment(){_delete_comment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(id,event_id){var data;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:data=new FormData();data.append(\"id\",id);fetch(\"http://localhost:4000/api/v1/comments/\"+id,{method:'DELETE',body:data}).then(function(resp){if(!resp.ok){var action={type:'error/set',data:'Unable to delete event.'};store.dispatch(action);}else{fetch_comments(event_id);fetch_events();}});case 3:case\"end\":return _context9.stop();}}},_callee9);}));return _delete_comment.apply(this,arguments);}export function fetch_invites(event_id){api_get(\"/invites\").then(function(data){var result=[];for(var _i2=0,_Object$entries2=Object.entries(data);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],value=_Object$entries2$_i[1];if(value.event_id==event_id){result.push(value);}}store.dispatch({type:'invites/set',data:result});});}export function create_invite(_x14,_x15){return _create_invite.apply(this,arguments);}function _create_invite(){_create_invite=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(email,event_id){var data,resp;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:data=new FormData();data.append(\"invite[email]\",email);data.append(\"invite[event_id]\",event_id);_context10.next=5;return fetch(\"http://localhost:4000/api/v1/invites\",{method:\"POST\",body:data});case 5:resp=_context10.sent;_context10.next=8;return resp.json();case 8:return _context10.abrupt(\"return\",_context10.sent);case 9:case\"end\":return _context10.stop();}}},_callee10);}));return _create_invite.apply(this,arguments);}export function update_invite(_x16,_x17,_x18,_x19){return _update_invite.apply(this,arguments);}function _update_invite(){_update_invite=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(response,user_id,event_id,invite_id){var data,resp;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:data=new FormData();data.append(\"invite[response]\",response);data.append(\"invite[user_id]\",user_id);data.append(\"invite[event_id]\",event_id);_context11.next=6;return fetch(\"http://localhost:4000/api/v1/invites/\"+invite_id,{method:\"PATCH\",body:data});case 6:resp=_context11.sent;_context11.next=9;return resp.json();case 9:return _context11.abrupt(\"return\",_context11.sent);case 10:case\"end\":return _context11.stop();}}},_callee11);}));return _update_invite.apply(this,arguments);}export function api_login(email,password){api_post(\"/session\",{email:email,password:password}).then(function(data){if(data.session){var action={type:'session/set',data:data.session};store.dispatch(action);}else if(data.error){var _action={type:'error/set',data:data.error};store.dispatch(_action);}});}export function load_defaults(){fetch_users();fetch_events();}","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550HW09/web-ui/src/api.js"],"names":["store","api_get","path","fetch","text","json","resp","data","api_post","opts","method","headers","body","JSON","stringify","fetch_users","then","dispatch","type","fetch_user","id","create_user","user","FormData","append","name","email","password","update_user","fetch_events","fetch_event","create_event","event","user_id","date","description","update_event","delete_event","ok","action","fetch_comments","event_id","result","Object","entries","key","value","push","create_comment","comment","delete_comment","fetch_invites","create_invite","update_invite","response","invite_id","api_login","session","error","load_defaults"],"mappings":"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","sourcesContent":["import store from './store';\n\n//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University\nasync function api_get(path) {\n  let text = await fetch(\n    \"http://localhost:4000/api/v1\" + path, {});\n  let resp = await text.json();\n  return resp.data;\n}\n\nasync function api_post(path, data) {\n  let opts = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data),\n  };\n  let text = await fetch(\n    \"http://localhost:4000/api/v1\" + path, opts);\n  return await text.json();\n}\n\nexport function fetch_users() {\n    api_get(\"/users\").then((data) => store.dispatch({\n        type: 'users/set',\n        data: data,\n    }));\n}\n\nexport function fetch_user(id) {\n  api_get(\"/users/\" + id).then((data) => store.dispatch({\n      type: 'user_form/set',\n      data: data,\n  }));\n}\n\nexport async function create_user(user) {\n  let data = new FormData();\n  data.append(\"user[name]\", user.name);\n  data.append(\"user[email]\", user.email);\n  data.append(\"user[password]\", user.password);\n  let resp = await fetch(\"http://localhost:4000/api/v1/users\", {\n    method: \"POST\",\n    body: data,\n  })\nreturn await resp.json();\n}\n\nexport async function update_user(user) {\n  let data = new FormData();\n  data.append(\"user_id\", user.id);\n  data.append(\"user[name]\", user.name);\n  data.append(\"user[email]\", user.email);\n  data.append(\"user[password]\", user.password);\n  let resp = await fetch(\"http://localhost:4000/api/v1/users/\" + user.id, {\n    method: \"PATCH\",\n    body: data,\n  })\nreturn await resp.json();\n}\n\nexport function fetch_events() {\n  api_get(\"/events\").then((data) => {\n    store.dispatch({\n    type: 'events/set',\n    data: data,\n  })});\n}\n\nexport function fetch_event(id) {\n  api_get(\"/events/\"+id).then((data) => store.dispatch({\n    type: 'event_form/set',\n    data: data,\n  }));\n}\n\nexport async function create_event(event) {\n  let data = new FormData();\n  data.append(\"event[user_id]\", event.user_id);\n  data.append(\"event[date]\", JSON.stringify(event.date));\n  data.append(\"event[description]\", event.description);\n  data.append(\"event[name]\", event.name);\n  let resp = await fetch(\"http://localhost:4000/api/v1/events\", {\n    method: \"POST\",\n    body: data,\n  })\n  return await resp.json();\n}\n\n\nexport async function update_event(event) {\n  let data = new FormData();\n  data.append(\"event[user_id]\", event.user_id);\n  data.append(\"event[date]\", JSON.stringify(event.date));\n  data.append(\"event[description]\", event.description);\n  data.append(\"event[name]\", event.name);\n  let resp = await fetch(\"http://localhost:4000/api/v1/events/\" + event.id, {\n    method: \"PATCH\",\n    body: data,\n  })\nreturn await resp.json();\n}\n\nexport async function delete_event(id) {\n  let data = new FormData();\n  data.append(\"id\", id);\n  fetch(\"http://localhost:4000/api/v1/events/\" + id, {\n    method: 'DELETE',\n    body: data,\n  }).then((resp) => {\n    if(!resp.ok){\n      let action = {\n        type: 'error/set',\n        data: 'Unable to delete event.',\n      };\n      store.dispatch(action);\n    }else {\n      fetch_events();\n    }\n  });\n}\n\n\nexport function fetch_comments(event_id) {\n  api_get(\"/comments\").then((data) => {\n    let result = []\n    for (let [key, value] of Object.entries(data)) {\n      if (value.event_id == event_id) {\n        result.push(value)\n      }\n    }\n    store.dispatch({\n    type: 'comments/set',\n    data: result,\n  })})\n}\n\nexport async function create_comment(comment, user_id, event_id) {\n  let data = new FormData();\n  data.append(\"comment[body]\", comment);\n  data.append(\"comment[event_id]\", event_id);\n  data.append(\"comment[user_id]\", user_id);\n  let resp = await fetch(\"http://localhost:4000/api/v1/comments\", {\n    method: \"POST\",\n    body: data,\n  })\n  return await resp.json();\n}\n\nexport async function delete_comment(id, event_id) {\n  let data = new FormData();\n  data.append(\"id\", id);\n  fetch(\"http://localhost:4000/api/v1/comments/\" + id, {\n    method: 'DELETE',\n    body: data,\n  }).then((resp) => {\n    if(!resp.ok){\n      let action = {\n        type: 'error/set',\n        data: 'Unable to delete event.',\n      };\n      store.dispatch(action);\n    }else {\n      fetch_comments(event_id);\n      fetch_events()\n    }\n  });\n}\n\nexport function fetch_invites(event_id) {\n  api_get(\"/invites\").then((data) => {\n    let result = []\n    for (let [key, value] of Object.entries(data)) {\n      if (value.event_id == event_id) {\n        result.push(value)\n      }\n    }\n    store.dispatch({\n    type: 'invites/set',\n    data: result,\n  })})\n}\n\nexport async function create_invite(email, event_id) {\n  let data = new FormData();\n  data.append(\"invite[email]\", email);\n  data.append(\"invite[event_id]\", event_id);\n  let resp = await fetch(\"http://localhost:4000/api/v1/invites\", {\n    method: \"POST\",\n    body: data,\n  })\n  return await resp.json();\n}\n\nexport async function update_invite(response, user_id, event_id, invite_id) {\n  let data = new FormData();\n  data.append(\"invite[response]\", response);\n  data.append(\"invite[user_id]\", user_id);\n  data.append(\"invite[event_id]\", event_id);\n  let resp = await fetch(\"http://localhost:4000/api/v1/invites/\" + invite_id, {\n    method: \"PATCH\",\n    body: data,\n  })\nreturn await resp.json();\n}\n\nexport function api_login(email, password) {\n  api_post(\"/session\", {email, password}).then((data) => {\n    if (data.session) {\n      let action = {\n        type: 'session/set',\n        data: data.session,\n      }\n      store.dispatch(action);\n    }\n    else if (data.error) {\n     let action = {\n        type: 'error/set',\n        data: data.error,\n      }\n      store.dispatch(action);\n    }\n  });\n}\n\nexport function load_defaults() {\n  fetch_users();\n  fetch_events();\n}\n"]},"metadata":{},"sourceType":"module"}