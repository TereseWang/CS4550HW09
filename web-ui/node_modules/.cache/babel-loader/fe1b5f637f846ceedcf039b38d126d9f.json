{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550HW09/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{create_user,fetch_users,api_login,fetch_reason}from'../api';//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UsersNew(){var history=useHistory();var _useState=useState({name:\"\",pass1:\"\",pass2:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];function onSubmit(ev){ev.preventDefault();var data=pick(user,['name','email','password']);create_user(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_users();api_login(user['email'],user['password']);history.push(\"/\");}});}function check_pass(p1,p2){// This is for user experience only,\n// validation logic goes on the server.\nif(p1!==p2){return\"Passwords don't match.\";}if(p1.length<8){return\"Password too short.\";}return\"\";}function update(field,ev){var u1=Object.assign({},user);u1[field]=ev.target.value;u1.password=u1.pass1;u1.pass_msg=check_pass(u1.pass1,u1.pass2);setUser(u1);}function updatePhoto(ev){var p1=Object.assign({},user);p1[\"photo\"]=ev.target.files[0];setUser(p1);}return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Register Acount\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"name\",ev);},value:user.name})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"email\",ev);},value:user.email})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(ev){return update(\"pass1\",ev);},value:user.pass1}),/*#__PURE__*/_jsx(\"p\",{children:user.pass_msg})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(ev){return update(\"pass2\",ev);},value:user.pass2})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold\",disabled:user.pass_msg!==\"\",children:\"Save\"})]});}function state2props(_state){return{};}export default connect(state2props)(UsersNew);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550HW09/web-ui/src/User/New.js"],"names":["Row","Col","Form","Button","connect","useState","useHistory","pick","store","create_user","fetch_users","api_login","fetch_reason","UsersNew","history","name","pass1","pass2","user","setUser","onSubmit","ev","preventDefault","data","then","error","action","type","dispatch","push","check_pass","p1","p2","length","update","field","u1","Object","assign","target","value","password","pass_msg","updatePhoto","files","email","state2props","_state"],"mappings":"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","sourcesContent":["import { Row, Col, Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { create_user, fetch_users, api_login, fetch_reason } from '../api';\n\n//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University\nfunction UsersNew() {\n  let history = useHistory();\n  const [user, setUser] = useState({\n    name: \"\", pass1: \"\", pass2: \"\",\n  });\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    let data = pick(user, ['name', 'email', 'password']);\n    create_user(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_users();\n          api_login(user['email'], user['password'])\n          history.push(\"/\")\n        }\n    });\n  }\n\n  function check_pass(p1, p2) {\n    // This is for user experience only,\n    // validation logic goes on the server.\n    if (p1 !== p2) {\n      return \"Passwords don't match.\";\n    }\n\n    if (p1.length < 8) {\n      return \"Password too short.\";\n    }\n\n    return \"\";\n  }\n\n  function update(field, ev) {\n    let u1 = Object.assign({}, user);\n    u1[field] = ev.target.value;\n    u1.password = u1.pass1;\n    u1.pass_msg = check_pass(u1.pass1, u1.pass2);\n    setUser(u1);\n  }\n\n  function updatePhoto(ev) {\n    let p1 = Object.assign({}, user);\n    p1[\"photo\"] = ev.target.files[0];\n    setUser(p1);\n  }\n\n  return (\n    <Form onSubmit={onSubmit}>\n      <Form.Group>\n        <h1 className=\"mt-5\">Register Acount</h1>\n        <Form.Label>Name</Form.Label>\n        <Form.Control type=\"text\"\n                      onChange={\n                        (ev) => update(\"name\", ev)}\n          value={user.name} />\n      </Form.Group>\n      <Form.Group>\n        <Form.Label>Email</Form.Label>\n        <Form.Control type=\"text\"\n                      onChange={\n                        (ev) => update(\"email\", ev)}\n          value={user.email} />\n      </Form.Group>\n      <Form.Group>\n        <Form.Label>Password</Form.Label>\n        <Form.Control type=\"password\"\n          onChange={\n            (ev) => update(\"pass1\", ev)}\n          value={user.pass1} />\n        <p>{user.pass_msg}</p>\n      </Form.Group>\n      <Form.Group>\n        <Form.Label>Confirm Password</Form.Label>\n        <Form.Control type=\"password\"\n          onChange={\n            (ev) => update(\"pass2\", ev)}\n          value={user.pass2} />\n      </Form.Group>\n      <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold\"\n              disabled={user.pass_msg !== \"\"}>\n        Save\n      </Button>\n    </Form>\n  );\n}\n\nfunction state2props(_state) {\n  return {};\n}\n\nexport default connect(state2props)(UsersNew);\n"]},"metadata":{},"sourceType":"module"}